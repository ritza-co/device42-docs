---
title: "Zapier Integration"
sidebar_position: 29
---

import ThemedImage from '@theme/ThemedImage'
import useBaseUrl from '@docusaurus/useBaseUrl'

## Generate the Zapier Endpoint

1. Sign up for Zapier or log in to your account and click on the **+ Create Zap** button.
2. Give your Zap a name at the top-left corner and click on the **1. Trigger** button.

    ![Set up Zap](/assets/images/zapier-integration/zap-create.png)

3. Select the latest **Webhooks by Zapier** option.

    ![Zapier trigger options](/assets/images/zapier-integration/zapier-webhook-option.png)

4. Under the **Event** field, choose the **Catch Raw Hook** option to return header information with the response. For parsed data, selected the **Catch Hook** option from the dropdown menu. Click on the **Continue** button.
   
    ![Catch Raw Hook Event](/assets/images/zapier-integration/trigger-event.png)

5. Copy the generated webhook URL to add as an endpoint in the Device42 main appliance.

## Device42 Configuration

In Device42, follow the steps below and add a Webhook Endpoint and Action. The Action is what triggers the webhook.  

### Add the Endpoint to Device42

1. Navigate to **Tools > Webhooks > Endpoints** and click on the **+ Add Webhook Endpoint** button on the left.

<ThemedImage
alt="Webhook Endpoints list page"
sources={{
    light: useBaseUrl('/assets/images/zapier-integration/d42-webhook-list-page-light.png'),
    dark: useBaseUrl('/assets/images/zapier-integration/d42-webhook-list-page-dark.png'),
}}
/>
<br/><br/>

2. Create a webhook endpoint by filling in the following:
   - **Name**: provide a unique name to the endpoint
   - **URL**: the URL generated by Zapier in the previous section
   - **Endpoint**: select **Zapier**
   - **Retry**: select **After 5 and 15 minutes** from the dropdown menu 
   - **Ignore Certificate Errors**: check this option

Optionally, you can add webhook headers to be included with the returned data when the Zap is triggered. Click on the **+ Add another Webhook Header** button and provide the header name and value.

<ThemedImage
alt="Add webhook endpoint form"
sources={{
    light: useBaseUrl('/assets/images/zapier-integration/d42-add-webhook-form-light.png'),
    dark: useBaseUrl('/assets/images/zapier-integration/d42-add-webhook-form-dark.png'),
}}
/>
<br/><br/>

### Configure the Device42 Action

Actions define which targets to monitor for changes (known as events) that will trigger the webhook. For example, you can monitor all Devices for any changes or monitor changes to specific Device fields, like **Device Operating System**. 

1. Navigate to **Tools > Webhooks > Actions** and click on the **+ Add Webhook Action** button.

<ThemedImage
alt="Webhook actions list page"
sources={{
    light: useBaseUrl('/assets/images/zapier-integration/webhook-action-list-page-light.png'),
    dark: useBaseUrl('/assets/images/zapier-integration/webhook-action-list-page-dark.png'),
}}
/>
<br/><br/>

2. Provide a **Name** for your Webhook Action. If you want to include all IT resources managed by Device42 in the action, check the **Process All Categories** checkbox. Alternatively, add selected IT resource(s) to the **Chosen categories** box. Use the search bar under **Available categories** to narrow down the options. 

In addition to monitoring for adding, deleting, and updating events, you can trigger the action when a resource is viewed by selecting **Process View Events** or when a log in occurs by selecting **Process Login Events**. 

<ThemedImage
alt="Webhook action categories"
sources={{
    light: useBaseUrl('/assets/images/zapier-integration/webhook-action-categories-light.png'),
    dark: useBaseUrl('/assets/images/zapier-integration/webhook-action-categories-dark.png'),
}}
/>
<br/><br/>

3. Add the endpoint you previously created to the action by clicking on the **Add another Webhook Action Endpoints** button. Click on the **magnifying glass icon** and select the endpoint from the list.

<ThemedImage
alt="Webhook action categories"
sources={{
    light: useBaseUrl('/assets/images/zapier-integration/action-endpoint-light.png'),
    dark: useBaseUrl('/assets/images/zapier-integration/action-endpoint-dark.png'),
}}
/>
<br/><br/>

## Configure the Zapier Action

Now we'll configure the action that Zapier automates when the webhook is triggered. In this example we'll print the JSON data returned from the webhook on a new line in a Google Sheet.

1. In Zapier, click on the box labeled **2. Action** and select **Google Sheets** from the options. 
2. Select the **Create Spreadsheet Row** as the **Event**. Click on the **Continue** button and link your Google account to the Zap.

    ![Select the spreadsheet action](/assets/images/zapier-integration/zapier-google-sheet-event.png)

3. Fill in the **Action** section: 
   - **Drive**: select the Google Drive that the Google Spreadsheet is stored on.
   - **Spreadsheet**: the name of the spreadsheet to add data to.
   - **Worksheet**: select the spreadsheet worksheet to target.
   - **"Column Name"**: Zapier will fetch the column headings in the spreadsheet and add them as fields. Select the data you want to add under the column from the dropdown menu


(Redo with data)
![Add Google Spreadsheet details](/assets/images/zapier-integration/spreadsheet-action.png)

4. Run the test.

(Redo with data)
![Test Zap](/assets/images/zapier-integration/spreadsheet-test.png)

5. When the test passes, click on the **Publish** button that becomes active. 

## Test the Zap

Test the Zap by making a change to the resource category you chose when setting up the Action in Device42. Refresh the Google Spreadsheet to see the JSON data that's been added to a row.

(Image of Google Sheet data)

To view any webhooks that have been triggered and pending, navigate to **Tools > Webhooks > Pending**. Delete processing webhooks by checking them in the list and choose one of the delete actions from the **Select an action** dropdown menu. Click on the **hammer icon** to perform the deletion. 