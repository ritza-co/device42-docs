---
title: "Changes in Version 3.0"
sidebar_position: 2
---

These are the changes to the `mapping.xml` file that version 3.0 has from version 2.0

If you are using a custom mapping.xml file, you need to manually apply these updates. See [Manage Customization with Newer Releases](/integration/external-integrations/freshservice-integration/customize-freshservice#manage-customization-with-newer-releases).

## Product Tasks Removed

The following two product tasks were deleted, as they are no longer needed due to a change in how the product is set for the asset:

```xml
<task enable="true" name="Products" type="product" description="Copy Product info from Device42 to Freshservice" d42_min_version="16.19.00">
```

```xml
<task enable="true" name="Products" type="product" description="Copy Product info from Device42 to Freshservice" d42_max_version="16.18.02">
```

## Copy Server Devices Tasks

Similar changes were made to three different versions of the copy servers `Devices` task, which differ by DOQL version and Device42 versions.

### DOQL v2 for Device42 19.04.00 and Later

The following changes were made within this `Devices` task:

```xml
<task enable="true" name="Devices" type="asset" description="Copy Servers from Device42 to Freshservice using DOQL v2" d42_min_version="19.04.00">
```

- In the DOQL query, the following `WHEN` clause was moved up to below the Load Balancer condition:

  ```sql
  WHEN view_device_v2.network_device THEN 'Switch'
  ```

  It now appears directly after:

  ```sql
  WHEN lower(view_device_v2.type) = 'virtual' AND lower(view_device_v2.os_name) similar to '%(f5|netscaler)%' THEN 'Load Balancer'
  ```

- Added the manufacturer field to the `SELECT` statement:

  ```sql
  view_vendor_v1.name as manufacturer,
  ```

- Added a `LEFT JOIN` for the vendor table:

  ```sql
  LEFT JOIN view_vendor_v1 on view_vendor_v1.vendor_pk = view_hardware_v2.vendor_fk
  ```

- The `hw_model` field element was changed from the following:

  ```xml
  <field resource="hw_model" source-type="string" target="product" target-type="string"
         target-header="Hardware"
         target-foreign="products" target-foreign-key="name" not-null="true" required="true" max-length="255"/>
  ```

  To the following:

  ```xml
  <field resource="hw_model" source-type="string" target="product" target-field="name" target-type="dict" max-length="255"/>
  ```

- Added a new `manufacturer` field element:

  ```xml
  <field resource="manufacturer" source-type="string" target="product" target-field="manufacturer" target-type="dict" max-length="255"/>
  ```

### DOQL v2 for Device42 16.19.00 to 19.03.99

The following changes were made within this `Devices` task:

```xml
<task enable="true" name="Devices" type="asset" description="Copy Servers from Device42 to Freshservice using DOQL v2" d42_max_version="19.03.99" d42_min_version="16.19.00">
```

- In the DOQL query, the following `WHEN` clause was moved up to below the Load Balancer condition:

  ```sql
  WHEN view_device_v2.network_device THEN 'Switch'
  ```

  It now appears directly after:

  ```sql
  WHEN lower(view_device_v2.type) = 'virtual' AND lower(view_device_v2.os_name) similar to '%(f5|netscaler)%' THEN 'Load Balancer'
  ```

- Added the manufacturer field to the `SELECT` statement:

  ```sql
  view_vendor_v1.name as manufacturer,
  ```

- Added a `LEFT JOIN` for the vendor table:

  ```sql
  LEFT JOIN view_vendor_v1 on view_vendor_v1.vendor_pk = view_hardware_v2.vendor_fk
  ```

- The `hw_model` field element was changed from the following:

  ```xml
  <field resource="hw_model" source-type="string" target="product" target-type="string"
         target-header="Hardware"
         target-foreign="products" target-foreign-key="name" not-null="true" required="true" max-length="255"/>
  ```

  To the following:

  ```xml
  <field resource="hw_model" source-type="string" target="product" target-field="name" target-type="dict" max-length="255"/>
  ```

- Added a new `manufacturer` field element:

  ```xml
  <field resource="manufacturer" source-type="string" target="product" target-field="manufacturer" target-type="dict" max-length="255"/>
  ```

### DOQL v1 for Device42 up to 16.18.02

The same changes were made within this `Devices` task, with the exception that the DOQL query references `view_device_v1` and `view_hardware_v1` instead of v2:

```xml
<task enable="true" name="Devices" type="asset" description="Copy Servers from Device42 to Freshservice using DOQL v1" d42_max_version="16.18.02">
```

- In the DOQL query, the following `WHEN` clause was moved up to below the Load Balancer condition:

  ```sql
  WHEN view_device_v1.network_device THEN 'Switch'
  ```

  It now appears directly after:

  ```sql
  WHEN lower(view_device_v1.type) = 'virtual' AND lower(view_device_v1.os_name) similar to '%(f5|netscaler)%' THEN 'Load Balancer'
  ```

- Added the manufacturer field to the `SELECT` statement:

  ```sql
  view_vendor_v1.name as manufacturer,
  ```

- Added a `LEFT JOIN` for the vendor table:

  ```sql
  LEFT JOIN view_vendor_v1 on view_vendor_v1.vendor_pk = view_hardware_v1.vendor_fk
  ```

- The `hw_model` field element was changed from the following:

  ```xml
  <field resource="hw_model" source-type="string" target="product" target-type="string"
         target-header="Hardware"
         target-foreign="products" target-foreign-key="name" not-null="true" required="true" max-length="255"/>
  ```

  To the following:

  ```xml
  <field resource="hw_model" source-type="string" target="product" target-field="name" target-type="dict" max-length="255"/>
  ```

- Added a new `manufacturer` field element:

  ```xml
  <field resource="manufacturer" source-type="string" target="product" target-field="manufacturer" target-type="dict" max-length="255"/>
  ```

## Software In Use Tasks

The same change was made to two different versions of the `Software In Use` task, which differ by Device42 version constraints.

### Version 16.19.00 and Later

The following change was made within this `Software In Use` task:

```xml
<task enable="true" name="Software In Use" type="software_installation" description="Create Software Install from Software In Use" d42_min_version="16.19.00">
```

- In the DOQL query, the following `WHEN` clause was moved up to below the Load Balancer condition:

  ```sql
  WHEN view_device_v2.network_device THEN 'Switch'
  ```

  It now appears directly after:

  ```sql
  WHEN lower(view_device_v2.type) = 'virtual' AND lower(view_device_v2.os_name) similar to '%(f5|netscaler)%' THEN 'Load Balancer'
  ```

### Version 16.18.02 and Earlier

The same change was made within this `Software In Use` task, with the exception that the DOQL query references `view_device_v1` instead of v2:

```xml
<task enable="true" name="Software In Use" type="software_installation" description="Create Software Install from Software In Use" d42_max_version="16.18.02">
```

- In the DOQL query, the following `WHEN` clause was moved up to below the Load Balancer condition:

  ```sql
  WHEN view_device_v1.network_device THEN 'Switch'
  ```

  It now appears directly after:

  ```sql
  WHEN lower(view_device_v1.type) = 'virtual' AND lower(view_device_v1.os_name) similar to '%(f5|netscaler)%' THEN 'Load Balancer'
  ```
